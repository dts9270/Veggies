<!DOCTYPE html>
<html lang="mr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>VegShop - Online Store</title>

<style>
body{margin:0;font-family:Poppins,sans-serif;background:#f6f6f6;color:#222;}
header{background:#fff;padding:14px;box-shadow:0 2px 10px #0001;display:flex;justify-content:space-between;align-items:center}
.logo{font-size:20px;font-weight:700;color:#0a8a4f}
.main{padding:14px}

/* Login box */
.login-box{max-width:300px;margin:50px auto;background:#fff;padding:20px;border-radius:12px;
           box-shadow:0 4px 16px #0002}
input,select{width:100%;padding:10px;margin-top:8px;border:1px solid #ccc;border-radius:8px}
.btn{width:100%;padding:12px;margin-top:12px;background:#0a8a4f;color:#fff;font-weight:700;border:none;border-radius:8px}
h2{margin:0;margin-bottom:10px;text-align:center}

/* Product list */
.card{background:#fff;padding:12px;border-radius:12px;box-shadow:0 4px 16px #0002;margin-bottom:14px}
.card img{width:100%;height:150px;border-radius:10px;object-fit:cover}
.title{font-size:17px;font-weight:700;margin:8px 0}
.price{color:#0a8a4f;font-weight:700}

/* Cart button */
.cart-btn{position:fixed;right:14px;bottom:14px;background:#0a8a4f;color:#fff;padding:12px 14px;border-radius:50px;font-weight:700;border:none}

/* Cart panel */
.cart-panel{position:fixed;left:0;right:0;bottom:-100%;background:#fff;border-radius:18px 18px 0 0;padding:15px;
            height:70%;box-shadow:0 -4px 16px #0004;transition:.4s;overflow:auto;}
.cart-panel.open{bottom:0}

/* Admin/Delivery dashboard */
.box{background:#fff;padding:14px;border-radius:10px;box-shadow:0 4px 16px #0002;margin-bottom:12px}
.item-row{display:flex;justify-content:space-between;margin:6px 0}
</style>
</head>
<body>

<header>
  <div class="logo">VegShop</div>
  <button onclick="showLogin()" style="border:none;background:#fff;font-size:16px">üîê Login</button>
</header>

<div id="userArea" class="main" style="display:none">
  <h2>‡§§‡§æ‡§ú‡•ç‡§Ø‡§æ ‡§≠‡§æ‡§ú‡•ç‡§Ø‡§æ</h2>
  <div id="productList"></div>
</div>

<!-- LOGIN SCREEN -->
<div id="loginScreen" class="login-box" style="display:none">
  <h2>Login</h2>
  <input id="username" placeholder="Username">
  <input id="password" type="password" placeholder="Password">
  <button class="btn" onclick="login()">Login</button>
</div>

<!-- ADMIN PANEL -->
<div id="adminPanel" class="main" style="display:none">
  <h2>Admin Dashboard</h2>
  <div id="adminOrders"></div>
</div>

<!-- DELIVERY PANEL -->
<div id="deliveryPanel" class="main" style="display:none">
  <h2>Delivery Dashboard</h2>
  <div id="deliveryOrders"></div>
</div>

<!-- CART BUTTON -->
<button class="cart-btn" id="cartBtn" onclick="openCart()" style="display:none">
  üõí Cart (<span id="cartCount">0</span>)
</button>

<!-- CART PANEL -->
<div id="cartPanel" class="cart-panel">
  <h3>üõí ‡§ï‡§æ‡§∞‡•ç‡§ü</h3>
  <div id="cartItems"></div>
  <h3>Total: ‚Çπ<span id="cartTotal">0</span></h3>
  <button class="btn" style="background:#25D366" onclick="placeOrder()">WhatsApp Order</button>
  <button class="btn" style="background:#aaa" onclick="closeCart()">Close</button>
</div>

<script>
/* ---------------- PRODUCTS ---------------- */
const products = [
  {id:1,name:"‡§¨‡§ü‡§æ‡§ü‡§æ",price:40,img:"https://i.imgur.com/0ZQZ0Z0.jpeg"},
  {id:2,name:"‡§ü‡•ã‡§Æ‡•Ö‡§ü‡•ã",price:50,img:"https://i.imgur.com/SGZQ7U2.jpeg"},
  {id:3,name:"‡§ï‡§æ‡§Ç‡§¶‡§æ",price:35,img:"https://i.imgur.com/8wJQZJH.jpeg"},
];

function renderProducts(){
  const box=document.getElementById("productList");
  box.innerHTML="";
  products.forEach(p=>{
    box.innerHTML+=`
      <div class='card'>
        <img src="${p.img}">
        <div class='title'>${p.name}</div>
        <div class='price'>‚Çπ${p.price}/kg</div>

        <select id="w${p.id}">
          <option value="0.25">250g</option>
          <option value="0.5">500g</option>
          <option value="1">1kg</option>
          <option value="2">2kg</option>
        </select>
        <input id="q${p.id}" type="number" value="1" min="1">

        <button class='btn' onclick="addToCart(${p.id})">Add to Cart</button>
      </div>
    `;
  });
}

/* ---------------- CART ---------------- */
let cart=[];
function addToCart(id){
  let p = products.find(x=>x.id===id);
  let w = parseFloat(document.getElementById("w"+id).value);
  let q = parseInt(document.getElementById("q"+id).value);

  cart.push({
    name:p.name,
    weight:w,
    qty:q,
    amount:p.price*w*q
  });

  updateCart();
}

function updateCart(){
  document.getElementById("cartCount").innerText=cart.length;
}

function openCart(){
  let panel=document.getElementById("cartPanel");
  let list=document.getElementById("cartItems");
  list.innerHTML="";
  let total=0;

  cart.forEach(c=>{
    list.innerHTML+=`
      <div class='item-row'>
        <div>${c.name} ${c.weight}kg √ó ${c.qty}</div>
        <div>‚Çπ${c.amount}</div>
      </div>
    `;
    total+=c.amount;
  });

  document.getElementById("cartTotal").innerText=total;
  panel.classList.add("open");
}
function closeCart(){ document.getElementById("cartPanel").classList.remove("open"); }

function placeOrder(){
  let msg="*VegShop Order*%0A%0A";
  cart.forEach(c=>{
    msg+=`${c.name} - ${c.weight}kg √ó ${c.qty} = ‚Çπ${c.amount}%0A`;
  });
  msg+=`%0A*Total:* ‚Çπ${document.getElementById("cartTotal").innerText}`;

  window.open("https://wa.me/91XXXXXXXXXX?text="+msg, "_blank");
}

/* ---------------- LOGIN SYSTEM ---------------- */
function showLogin(){
  document.getElementById("loginScreen").style.display="block";
  document.getElementById("userArea").style.display="none";
  document.getElementById("adminPanel").style.display="none";
  document.getElementById("deliveryPanel").style.display="none";
}

function login(){
  let u=document.getElementById("username").value;
  let p=document.getElementById("password").value;

  // USER
  if(u==="" && p===""){
    loginSuccess("user");
    return;
  }

  // ADMIN LOGIN
  if(u==="admin" && p==="admin"){
    loginSuccess("admin");
    return;
  }

  // DELIVERY LOGIN
  if(u==="deepak" && p==="1234"){
    loginSuccess("delivery");
    return;
  }

  alert("Wrong Login");
}

function loginSuccess(role){
  document.getElementById("loginScreen").style.display="none";

  if(role==="user"){
    document.getElementById("userArea").style.display="block";
    document.getElementById("cartBtn").style.display="block";
    renderProducts();
  }

  if(role==="admin"){
    document.getElementById("adminPanel").style.display="block";
    loadAdminOrders();
  }

  if(role==="delivery"){
    document.getElementById("deliveryPanel").style.display="block";
    loadDeliveryOrders();
  }
}

/* ---------------- ADMIN PANEL ---------------- */
let allOrders = []; // stored orders

function loadAdminOrders(){
  document.getElementById("adminOrders").innerHTML="<p>No orders yet</p>";
}

/* ---------------- DELIVERY PANEL ---------------- */
function loadDeliveryOrders(){
  document.getElementById("deliveryOrders").innerHTML="<p>No assigned orders</p>";
}

</script>
</body>
</html>
