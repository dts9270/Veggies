<!doctype html>
<html lang="mr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>DS Vegetable ‚Ä¢ Parbhani (RCM Style)</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --primary:#0b78d1;       /* RCM-like blue accent */
  --accent:#00C271;        /* green accent for price */
  --bg:#ffffff;
  --muted:#6e7574;
  --card:#fff;
  --radius:14px;
  --shadow:0 10px 30px rgba(10,20,30,0.06);
  --glass:rgba(255,255,255,0.65);
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter,'Noto Sans Devanagari',sans-serif;-webkit-font-smoothing:antialiased;background:#f6f7f8;color:#0b2b26}
.container{max-width:1080px;margin:12px auto;padding:12px}

/* Top header */
.header{
  display:flex;align-items:center;justify-content:space-between;gap:12px;
  background:var(--card);padding:10px;border-radius:12px;box-shadow:var(--shadow);
}
.logo{display:flex;align-items:center;gap:10px}
.logo .img{width:44px;height:44px;border-radius:8px;background:linear-gradient(135deg,var(--primary),#24a0ff);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:800}
.location{font-weight:700}
.search-wrap{margin-top:10px}
.search{width:100%;padding:12px;border-radius:10px;border:1px solid #eee;background:#fafafa}

/* slider */
.slider-container{margin-top:12px;position:relative;border-radius:14px;overflow:hidden;box-shadow:0 14px 40px rgba(11,120,209,0.08)}
.slider-track{display:flex;transition:transform .6s ease}
.slide{min-width:100%;height:190px;position:relative}
.slide img{width:100%;height:100%;object-fit:cover;display:block}
.slide-overlay{position:absolute;left:0;right:0;bottom:0;padding:12px;background:linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,0.22));color:#fff}

/* dots */
.dots{position:absolute;left:50%;transform:translateX(-50%);bottom:8px;display:flex;gap:6px}
.dot{width:8px;height:8px;border-radius:50%;background:rgba(255,255,255,0.6);opacity:0.9}
.dot.active{background:var(--primary);transform:scale(1.3)}

/* categories - round */
.cats{display:flex;gap:12px;overflow:auto;padding:12px 0;margin-top:12px}
.cat{min-width:92px;flex:0 0 auto;background:var(--card);border-radius:999px;padding:10px;display:flex;flex-direction:column;align-items:center;gap:8px;box-shadow:0 8px 24px rgba(0,0,0,0.04);cursor:pointer}
.cat .icon{width:56px;height:56px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:#f5f8ff;font-size:24px}
.cat p{margin:0;font-weight:700;color:var(--muted);font-size:0.88rem}

/* section title */
.section{margin-top:18px}
.section h3{margin:0 0 8px 0;font-size:1.05rem}
.section .sub{color:var(--muted);font-size:.9rem}

/* products grid */
.grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:10px}
@media(min-width:900px){ .grid{grid-template-columns:repeat(3,1fr)} }
.card{background:var(--card);border-radius:12px;padding:10px;box-shadow:var(--shadow);transition:transform .18s}
.card:hover{transform:translateY(-6px)}
.media{height:110px;border-radius:10px;background:#f7fbff;display:flex;align-items:center;justify-content:center}
.title{font-weight:800;margin-top:8px}
.meta{color:var(--muted);font-size:0.88rem;margin-top:4px}
.row{display:flex;align-items:center;justify-content:space-between;margin-top:10px}
.price{font-weight:900;color:var(--accent)}
.qty-options{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
.qty-btn{padding:8px 10px;border-radius:8px;border:1px solid #eee;background:#fff;font-weight:800;cursor:pointer}

/* cart page */
.cart-wrap{margin-top:12px}
.cart-item{display:flex;justify-content:space-between;align-items:center;background:var(--card);padding:10px;border-radius:10px;box-shadow:0 8px 24px rgba(0,0,0,0.04);margin-bottom:10px}
.thumb{width:56px;height:56px;border-radius:8px;background:#f6fbff;display:flex;align-items:center;justify-content:center}
.remove{background:transparent;border:1px solid #eee;padding:6px;border-radius:8px;cursor:pointer}

/* glass total */
.glass{position:sticky;bottom:14px;background:linear-gradient(180deg,rgba(255,255,255,0.98),rgba(255,255,255,0.95));padding:12px;border-radius:12px;box-shadow:0 18px 50px rgba(0,0,0,0.06);margin-top:10px}
.glass .row{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
.glass .big{font-weight:900;font-size:1.1rem;color:#0b2740}

/* bottom nav */
.bottom-nav{position:fixed;left:0;right:0;bottom:0;background:var(--card);display:flex;justify-content:space-around;padding:8px 12px;border-top:1px solid #eee;box-shadow:0 -6px 18px rgba(0,0,0,0.04)}
.nav-item{display:flex;flex-direction:column;align-items:center;font-size:12px;color:var(--muted);cursor:pointer}
.nav-item.active{color:var(--primary);font-weight:800}

/* small */
.badge{background:var(--primary);color:#fff;padding:4px 7px;border-radius:8px;font-weight:800;font-size:12px}
.muted{color:var(--muted)}
.hidden{display:none}
</style>
</head>
<body>

<div class="container">
  <!-- header -->
  <div class="header">
    <div class="logo">
      <div class="img">DS</div>
      <div>
        <div class="location">Parbhani ‚Ä¢ Donhi</div>
        <div class="muted" style="font-size:12px">Fresh Vegetables & Fruits</div>
      </div>
    </div>

    <div style="width:48%">
      <input id="topSearch" class="search" placeholder="Search 'Featured Products'...">
    </div>

    <div style="display:flex;gap:8px;align-items:center">
      <div style="text-align:right"><div style="font-weight:800">431401</div><div class="muted" style="font-size:12px">Change</div></div>
    </div>
  </div>

  <!-- slider -->
  <div class="slider-container" id="sliderRoot" style="margin-top:12px">
    <div class="slider-track" id="sliderTrack"></div>
    <div class="dots" id="sliderDots"></div>
  </div>

  <!-- categories -->
  <div class="cats" id="catsRoot" aria-hidden="false"></div>

  <!-- main content -->
  <div id="mainContent"></div>
</div>

<!-- bottom nav -->
<div class="bottom-nav">
  <div class="nav-item active" data-route="#/" onclick="goRoute('#/')"> 
    <div>üè†</div><div>Home</div>
  </div>
  <div class="nav-item" data-route="#/vegetables" onclick="goRoute('#/vegetables')">
    <div>ü•¨</div><div>Vegetables</div>
  </div>
  <div class="nav-item" data-route="#/cart" onclick="goRoute('#/cart')">
    <div style="position:relative">üõí <span id="cartBadge" class="badge hidden">0</span></div><div>Cart</div>
  </div>
  <div class="nav-item" data-route="#/account" onclick="goRoute('#/account')">
    <div>üë§</div><div>Account</div>
  </div>
  <div class="nav-item" data-route="#/menu" onclick="goRoute('#/menu')">
    <div>‚ò∞</div><div>Menu</div>
  </div>
</div>

<script>
/* ===== Persistent keys & seed data (keeps existing logic) ===== */
const KEY_PROD = 'ds_prod_v2', KEY_CART='ds_cart_v2', KEY_BANNERS='ds_banners_v2', KEY_SLIDER_SPEED='ds_slider_speed_v2';
if(!localStorage.getItem(KEY_PROD)){
  localStorage.setItem(KEY_PROD, JSON.stringify([
    {id:1,name:'‡§ü‡•ã‡§Æ‡•Ö‡§ü‡•ã',price:40,cat:'Vegetables'},
    {id:2,name:'‡§¨‡§ü‡§æ‡§ü‡§æ',price:30,cat:'Vegetables'},
    {id:3,name:'‡§ï‡§æ‡§Ç‡§¶‡§æ',price:35,cat:'Vegetables'},
    {id:4,name:'‡§ï‡•á‡§≥‡•Ä',price:90,cat:'Fruits'},
    {id:5,name:'‡§∏‡§´‡§∞‡§ö‡§Ç‡§¶',price:130,cat:'Fruits'},
    {id:6,name:'‡§™‡§æ‡§≤‡§ï',price:22,cat:'Vegetables'}
  ]));
}
if(!localStorage.getItem(KEY_CART)) localStorage.setItem(KEY_CART, JSON.stringify([]));
if(!localStorage.getItem(KEY_BANNERS)) localStorage.setItem(KEY_BANNERS, JSON.stringify([
  "https://i.imgur.com/BwnYrHq.jpg",
  "https://i.imgur.com/czZ1EoG.jpg",
  "https://i.imgur.com/0h7rUvp.jpg"
]));
if(!localStorage.getItem(KEY_SLIDER_SPEED)) localStorage.setItem(KEY_SLIDER_SPEED, '3500');

/* helpers */
const prods = ()=> JSON.parse(localStorage.getItem(KEY_PROD)||'[]');
const cart = ()=> JSON.parse(localStorage.getItem(KEY_CART)||'[]');
const saveCart = a => localStorage.setItem(KEY_CART, JSON.stringify(a));
const banners = ()=> JSON.parse(localStorage.getItem(KEY_BANNERS)||'[]');
const sliderSpeed = ()=> Number(localStorage.getItem(KEY_SLIDER_SPEED) || 3500);

/* routing */
window.addEventListener('hashchange', renderRoute);
window.addEventListener('load', renderRoute);
document.getElementById('topSearch').addEventListener('input', e=> {
  const q = e.target.value.trim().toLowerCase();
  if(location.hash==="#"||!location.hash||location.hash==="#/") renderHome(q);
});

/* init categories */
function initCats(){
  const cats = [
    {id:'Vegetables', label:'Vegetables', icon:'ü•¨'},
    {id:'Fruits', label:'Fruits', icon:'üçé'}
  ];
  const root = document.getElementById('catsRoot');
  root.innerHTML = '';
  cats.forEach(c=>{
    const d = document.createElement('div'); d.className='cat'; d.onclick = ()=> goRoute(`#/${c.id.toLowerCase()}`);
    d.innerHTML = `<div class="icon">${c.icon}</div><p>${c.label}</p>`;
    root.appendChild(d);
  });
}
initCats();

/* slider loader */
let sliderInterval = null;
function loadSlider(){
  const list = banners();
  const track = document.getElementById('sliderTrack');
  const dots = document.getElementById('sliderDots');
  track.innerHTML=''; dots.innerHTML='';
  list.forEach((url,i)=>{
    const s = document.createElement('div'); s.className='slide';
    s.innerHTML = `<img src="${url}" alt="banner ${i+1}"><div class="slide-overlay"><strong>DS Vegetable</strong><div style="font-size:13px">Fresh from Parbhani ‚Ä¢ Delivered to Your Home</div></div>`;
    track.appendChild(s);
    const dot = document.createElement('div'); dot.className = 'dot' + (i===0?' active':''); dots.appendChild(dot);
  });
  let cur = 0;
  const speed = sliderSpeed();
  if(sliderInterval) clearInterval(sliderInterval);
  sliderInterval = setInterval(()=> {
    cur = (cur+1) % list.length;
    track.style.transform = `translateX(-${cur*100}%)`;
    document.querySelectorAll('.dot').forEach((d,idx)=> d.classList.toggle('active', idx===cur));
  }, speed);
  // swipe support
  addSwipe(track, list.length);
}
loadSlider();

/* swipe helper */
function addSwipe(track, slidesCount){
  let startX=0, current=0;
  track.addEventListener('touchstart', e=> startX = e.touches[0].clientX);
  track.addEventListener('touchend', e=>{
    let endX = e.changedTouches[0].clientX;
    const dx = endX - startX;
    if(Math.abs(dx) > 40){
      if(dx < 0) current = Math.min(slidesCount-1, current + 1);
      else current = Math.max(0, current - 1);
      track.style.transform = `translateX(-${current*100}%)`;
      document.querySelectorAll('.dot').forEach((d,idx)=> d.classList.toggle('active', idx===current));
    }
  });
}

/* render pages */
function renderRoute(){
  const h = location.hash || '#/';
  document.querySelectorAll('.nav-item').forEach(n=> n.classList.toggle('active', n.dataset.route === h));
  if(h==='#/' || h==='') renderHome();
  else if(h.startsWith('#/vegetables')) renderProducts('Vegetables');
  else if(h.startsWith('#/fruits')) renderProducts('Fruits');
  else if(h.startsWith('#/cart')) renderCart();
  else if(h.startsWith('#/account')) renderAccount();
  else if(h.startsWith('#/menu')) renderMenu();
  else renderHome();
  updateCartBadge();
}

/* Home page (RCM-style) */
function renderHome(q=''){
  const main = document.getElementById('mainContent');
  const list = prods().filter(p => !q || p.name.toLowerCase().includes(q) || p.cat.toLowerCase().includes(q));
  let html = `<div class="section"><h3>Categories</h3><div class="sub muted">Find Exactly What You Need</div></div>`;
  html += `<div class="section"><h3 style="margin-top:12px">Trending Products</h3><div class="grid">`;
  list.forEach(p=>{
    html += productCardHtml(p);
  });
  html += `</div></div>`;
  main.innerHTML = html;
  attachQtys();
}

/* Products by category (Vegetables / Fruits) */
function renderProducts(category){
  const main = document.getElementById('mainContent');
  const list = prods().filter(p => p.cat === category);
  let html = `<div class="section"><h3>${category}</h3><div class="sub muted">Best of ${category}</div></div>`;
  html += `<div class="grid">`;
  list.forEach(p=> html += productCardHtml(p));
  html += `</div>`;
  main.innerHTML = html;
  attachQtys();
}

/* product card HTML */
function productCardHtml(p){
  return `<div class="card">
    <div class="media"><img src="https://img.icons8.com/fluency/96/vegetarian-food.png" alt="${p.name}"></div>
    <div class="title">${p.name}</div>
    <div class="meta">‚Çπ${p.price}/kg ‚Ä¢ ${p.cat}</div>
    <div class="row"><div class="price">‚Çπ${p.price}</div></div>
    <div class="qty-options" data-id="${p.id}">
      <button class="qty-btn" data-q="0.25">250 gm</button>
      <button class="qty-btn" data-q="0.5">500 gm</button>
      <button class="qty-btn" data-q="1">1 kg</button>
      <button class="qty-btn" data-q="2">2 kg</button>
      <button class="qty-btn" data-q="5">5 kg</button>
    </div>
  </div>`;
}

/* attach qty handlers */
function attachQtys(){
  document.querySelectorAll('.qty-btn').forEach(btn=>{
    btn.onclick = ()=>{
      const id = btn.parentElement.dataset.id;
      const factor = Number(btn.dataset.q);
      const p = prods().find(x=>x.id==id);
      const price = +(p.price * factor).toFixed(2);
      const c = cart();
      c.push({id:p.id,name:p.name,qtyText:btn.innerText,price});
      saveCart(c);
      updateCartBadge();
      showToast(`${p.name} (${btn.innerText}) added`);
    }
  });
}

/* cart page */
function renderCart(){
  const main = document.getElementById('mainContent');
  const items = cart();
  if(!items.length){ main.innerHTML = '<h3>‡§ï‡§æ‡§∞‡•ç‡§ü ‡§∞‡§ø‡§ï‡§æ‡§Æ‡§æ ‡§Ü‡§π‡•á</h3>'; return; }
  let subtotal = 0;
  let html = `<div class="cart-wrap"><h3>‡§§‡•Å‡§Æ‡§ö‡§æ ‡§ï‡§æ‡§∞‡•ç‡§ü</h3>`;
  items.forEach((it,idx)=>{ subtotal += Number(it.price); html += `<div class="cart-item"><div style="display:flex;gap:10px;align-items:center"><div class="thumb">ü•ó</div><div><strong>${it.name}</strong><div class="muted">${it.qtyText}</div></div></div><div style="text-align:right"><div style="font-weight:900">‚Çπ${it.price}</div><div style="margin-top:8px"><button class="remove" onclick="removeItem(${idx})">Remove</button></div></div></div>` });
  const delivery = subtotal>=500?0:20; const total = subtotal + delivery;
  html += `</div>`;
  html += `<div class="glass"><div class="row"><div class="muted">Subtotal</div><div>‚Çπ${subtotal}</div></div><div class="row"><div class="muted">Delivery</div><div>‚Çπ${delivery}</div></div><div class="row" style="margin-top:8px"><div class="big">Total</div><div class="big">‚Çπ${total}</div></div><div style="margin-top:10px;display:flex;gap:8px"><button onclick="placeOrder()" style="flex:1;padding:10px;border-radius:10px;border:none;background:var(--primary);color:#fff;font-weight:800">Place Order (WhatsApp)</button><button onclick="checkoutCOD()" style="flex:1;padding:10px;border-radius:10px;border:1px solid #ddd;background:#fff">Cash on Delivery</button></div></div>`;
  main.innerHTML = html;
}

/* remove from cart */
function removeItem(i){ const c = cart(); c.splice(i,1); saveCart(c); renderCart(); updateCartBadge(); showToast('Item removed') }

/* place order - WhatsApp to owner + confirmation to customer */
function placeOrder(){
  const items = cart(); if(!items.length) return;
  const name = prompt('‡§®‡§æ‡§µ:'); const phone = prompt('‡§´‡•ã‡§®:'); const addr = prompt('‡§™‡§§‡•ç‡§§‡§æ:');
  if(!name||!phone||!addr){ alert('‡§∏‡§∞‡•ç‡§µ ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä ‡§≠‡§∞‡§æ'); return; }
  let msg = `*New Order*%0A%0ACustomer: ${encodeURIComponent(name)}%0APhone: ${encodeURIComponent(phone)}%0AAddress: ${encodeURIComponent(addr)}%0A%0AItems:%0A`;
  items.forEach(it => msg += encodeURIComponent(`‚Ä¢ ${it.name} - ${it.qtyText} - ‚Çπ${it.price}\n`));
  const subtotal = items.reduce((s,x)=>s + Number(x.price),0); const delivery = subtotal>=500?0:20; const total = subtotal + delivery;
  msg += encodeURIComponent(`%0ATotal: ‚Çπ${total}`);
  window.open(`https://wa.me/7020970727?text=${msg}`, '_blank');
  const conf = `üôè ‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶ ${name}!%0A‡§Ü‡§™‡§≤‡•Ä ‡§ë‡§∞‡•ç‡§°‡§∞ ‡§Æ‡§ø‡§≥‡§æ‡§≤‡•Ä ‡§Ü‡§π‡•á.%0ADS Vegetable ‚Äî Parbhani`;
  window.open(`https://wa.me/${phone}?text=${conf}`, '_blank');
  saveCart([]); renderHome(); updateCartBadge(); showToast('Order placed');
}

/* COD fallback */
function checkoutCOD(){
  const items = cart(); if(!items.length) return;
  const name = prompt('‡§®‡§æ‡§µ:'); const phone = prompt('‡§´‡•ã‡§®:'); const addr = prompt('‡§™‡§§‡•ç‡§§‡§æ:');
  if(!name||!phone||!addr){ alert('‡§∏‡§∞‡•ç‡§µ ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä ‡§≠‡§∞‡§æ'); return; }
  const subtotal = items.reduce((s,x)=>s + Number(x.price),0); const delivery = subtotal>=500?0:20; const total = subtotal + delivery;
  let msg = `*New COD Order*%0A%0ACustomer: ${encodeURIComponent(name)}%0APhone: ${encodeURIComponent(phone)}%0AAddress: ${encodeURIComponent(addr)}%0A%0AItems:%0A`;
  items.forEach(it => msg += encodeURIComponent(`‚Ä¢ ${it.name} - ${it.qtyText} - ‚Çπ${it.price}\n`));
  msg += encodeURIComponent(`%0ATotal: ‚Çπ${total}%0A%0APayment: Cash on Delivery`);
  window.open(`https://wa.me/7020970727?text=${msg}`, '_blank');
  const conf = `üôè ‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶ ${name}!%0A‡§Ü‡§™‡§≤‡•Ä ‡§ë‡§∞‡•ç‡§°‡§∞ ‡§Æ‡§ø‡§≥‡§æ‡§≤‡•Ä ‡§Ü‡§π‡•á. ‡§Ü‡§Æ‡•ç‡§π‡•Ä ‡§≤‡§µ‡§ï‡§∞‡§ö ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•Ç.%0ADS Vegetable ‚Äî Parbhani`;
  window.open(`https://wa.me/${phone}?text=${conf}`, '_blank');
  saveCart([]); renderHome(); updateCartBadge(); showToast('Order placed (COD)');
}

/* account & menu placeholders */
function renderAccount(){ document.getElementById('mainContent').innerHTML = `<div class="section"><h3>Account</h3><div class="muted">Profile and Orders (coming)</div></div>`; }
function renderMenu(){ document.getElementById('mainContent').innerHTML = `<div class="section"><h3>Menu</h3><div class="muted">Settings, Help, About</div></div>`; }

/* navigation helper */
function goRoute(h){ location.hash = h; }

/* small toast */
let tTimer=0;
function showToast(msg){
  clearTimeout(tTimer);
  let t = document.getElementById('dsToast');
  if(!t){ t=document.createElement('div'); t.id='dsToast'; t.style.position='fixed'; t.style.left='50%'; t.style.transform='translateX(-50%)'; t.style.bottom='110px'; t.style.background= 'var(--primary)'; t.style.color='#fff'; t.style.padding='10px 14px'; t.style.borderRadius='999px'; t.style.zIndex=9999; t.style.fontWeight='800'; document.body.appendChild(t); }
  t.innerText = msg; t.style.opacity = '1'; t.style.display='block';
  tTimer = setTimeout(()=>{ t.style.opacity='0'; setTimeout(()=> t.style.display='none',300); },1400);
}

/* update cart badge */
function updateCartBadge(){
  const c = cart();
  const badge = document.getElementById('cartBadge');
  if(c.length) { badge.innerText = c.length; badge.classList.remove('hidden'); } else badge.classList.add('hidden');
}

/* auto clear at midnight */
function autoClearCartAtMidnight(){
  const now = new Date(), next=new Date();
  next.setHours(24,0,0,0);
  setTimeout(()=>{ localStorage.removeItem(KEY_CART); autoClearCartAtMidnight(); updateCartBadge(); }, next-now);
}
autoClearCartAtMidnight();

/* initial render */
renderRoute();
updateCartBadge();
</script>
</body>
</html>
